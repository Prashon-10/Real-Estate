@startuml DFD_Level_1

title Real Estate Application - Data Flow Diagram Level 1

!define EXTERNAL_ENTITY #FFE0B2
!define PROCESS #E3F2FD
!define DATA_STORE #E8F5E8

skinparam rectangle {
    BackgroundColor PROCESS
    BorderColor #1976D2
}

skinparam entity {
    BackgroundColor EXTERNAL_ENTITY
    BorderColor #F57C00
}

skinparam storage {
    BackgroundColor DATA_STORE
    BorderColor #388E3C
}

' External Entities
entity "Customer" as customer
entity "Agent" as agent
entity "Admin" as admin

' Main Processes
rectangle "1.0\nUser Management" as P1
rectangle "2.0\nProperty Management" as P2
rectangle "3.0\nSearch & Recommendations" as P3
rectangle "4.0\nFavorites Management" as P4
rectangle "5.0\nMessaging System" as P5

' Data Stores
storage "D1\nUsers" as D1
storage "D2\nProperties" as D2
storage "D3\nSearch History" as D3
storage "D4\nRecommendations" as D4
storage "D5\nFavorites" as D5
storage "D6\nMessages" as D6
storage "D7\nProperty Images" as D7

' External to Process flows
customer --> P1 : Registration data
customer --> P1 : Login credentials
agent --> P1 : Agent registration
admin --> P1 : User management

customer --> P3 : Search queries
customer --> P3 : Browse requests

customer --> P4 : Add/remove favorites
customer --> P4 : View favorites

customer --> P5 : Send messages
agent --> P5 : Reply to messages

agent --> P2 : Create listings
agent --> P2 : Update properties
agent --> P2 : Upload images
admin --> P2 : Moderate listings

' Process to External flows
P1 --> customer : User profile
P1 --> agent : Agent dashboard
P1 --> admin : User analytics

P2 --> customer : Property listings
P2 --> agent : Property management
P2 --> admin : Property reports

P3 --> customer : Search results
P3 --> customer : Recommendations

P4 --> customer : Favorites list

P5 --> customer : Message notifications
P5 --> agent : Message inbox

' Process to Data Store flows
P1 --> D1 : User data
P1 <-- D1 : User records

P2 --> D2 : Property data
P2 <-- D2 : Property records
P2 --> D7 : Image files
P2 <-- D7 : Image data

P3 --> D3 : Search queries
P3 <-- D3 : Search history
P3 --> D4 : Recommendation scores
P3 <-- D4 : User recommendations
P3 <-- D2 : Property data for search

P4 --> D5 : Favorite entries
P4 <-- D5 : User favorites
P4 <-- D2 : Favorited properties

P5 --> D6 : Message data
P5 <-- D6 : Message history
P5 <-- D2 : Property context
P5 <-- D1 : User context

' Inter-process flows
P1 --> P3 : User preferences
P1 --> P4 : User identity
P1 --> P5 : User authentication

P2 --> P3 : New property data
P2 --> P4 : Property availability

P3 --> P4 : Recommended properties

note top of P3
  **AI Components:**
  - Sentence Transformers
  - Semantic Search
  - Cosine Similarity
  - Recommendation Engine
end note

note right of D4
  **ML Data:**
  - User behavior patterns
  - Property similarity scores
  - Recommendation weights
end note

@enduml
