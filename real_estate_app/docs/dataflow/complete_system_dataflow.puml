@startuml Complete_System_Data_Flow

title Real Estate Application - Complete System Data Flow Diagram

!define PROCESS_COLOR #E3F2FD
!define DATASTORE_COLOR #F3E5F5
!define EXTERNAL_COLOR #E8F5E8

== External Entities ==
actor "Authenticated User\n(Customer)" as customer #External_COLOR
actor "Property Agent\n(Staff)" as agent #External_COLOR
actor "System Admin" as admin #External_COLOR
cloud "AI Search Engine\n(External API)" as ai_engine #External_COLOR

== Level 0: Context Diagram ==
rectangle "Real Estate\nManagement System" as system #PROCESS_COLOR

customer --> system : Property search requests\nInquiry messages\nFavorite properties
system --> customer : Property listings\nSearch results\nMessage responses

agent --> system : Property management\nCustomer responses\nListing updates
system --> agent : Customer inquiries\nProperty analytics\nNotifications

admin --> system : User management\nSystem configuration
system --> admin : System reports\nUser analytics

ai_engine --> system : Enhanced search results\nProperty recommendations
system --> ai_engine : Search queries\nProperty data

== Level 1: Main Processes ==
rectangle "1.0\nUser\nAuthentication" as auth_process #PROCESS_COLOR
rectangle "2.0\nProperty\nManagement" as property_process #PROCESS_COLOR
rectangle "3.0\nSearch &\nRecommendation" as search_process #PROCESS_COLOR
rectangle "4.0\nInquiry &\nMessaging" as message_process #PROCESS_COLOR
rectangle "5.0\nUser Profile\nManagement" as profile_process #PROCESS_COLOR

== Data Stores ==
cylinder "D1: Users\nDatabase" as user_db #DATASTORE_COLOR
cylinder "D2: Properties\nDatabase" as property_db #DATASTORE_COLOR
cylinder "D3: Messages\nDatabase" as message_db #DATASTORE_COLOR
cylinder "D4: Favorites\nDatabase" as favorites_db #DATASTORE_COLOR
cylinder "D5: Search Cache\nDatabase" as search_db #DATASTORE_COLOR

== Level 1 Data Flows ==
customer --> auth_process : Login credentials\nRegistration data
auth_process --> customer : Authentication status\nSession tokens
auth_process <--> user_db : User credentials\nSession data

customer --> property_process : Property view requests\nFilter preferences
property_process --> customer : Property listings\nProperty details
property_process <--> property_db : Property data\nView statistics

customer --> search_process : Search queries\nLocation filters
search_process --> customer : Search results\nRecommendations
search_process <--> search_db : Cached results\nSearch history
search_process <--> property_db : Property matching\nMetadata queries
search_process <--> ai_engine : Enhanced queries\nAI responses

customer --> message_process : Inquiry messages\nMessage responses
message_process --> customer : Message confirmations\nAgent replies
message_process <--> message_db : Message storage\nThread management
message_process <--> property_db : Property context\nAgent information

customer --> profile_process : Profile updates\nFavorite actions
profile_process --> customer : Profile confirmations\nFavorite lists
profile_process <--> user_db : Profile data\nPreferences
profile_process <--> favorites_db : Favorite properties\nWishlist data

agent --> property_process : Property listings\nProperty updates
property_process --> agent : Listing confirmations\nProperty analytics
agent --> message_process : Customer responses\nInquiry handling
message_process --> agent : New inquiries\nMessage notifications

admin --> auth_process : User management\nRole assignments
auth_process --> admin : User reports\nAuthentication logs
admin --> property_process : System configuration\nData management
property_process --> admin : System analytics\nUsage reports

@enduml
