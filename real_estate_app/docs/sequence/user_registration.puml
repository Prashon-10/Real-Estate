@startuml User_Registration_Sequence

title User Registration Process

actor Customer as C
participant "Registration Form" as RF
participant "Django Views" as DV
participant "User Model" as UM
participant "Database" as DB
participant "Email Service" as ES

C -> RF : Fill registration form
activate RF

RF -> DV : POST /accounts/register/
activate DV

DV -> DV : Validate form data
DV -> DV : Check username/email uniqueness

alt Valid Data
    DV -> UM : Create new user
    activate UM
    
    UM -> UM : Generate unique_key
    UM -> UM : Hash password
    UM -> DB : Save user record
    activate DB
    DB -> UM : User ID
    deactivate DB
    
    UM -> DV : User object
    deactivate UM
    
    DV -> ES : Send welcome email (optional)
    activate ES
    ES -> DV : Email sent
    deactivate ES
    
    DV -> RF : Success message with unique_key
    RF -> C : Registration successful
    
else Invalid Data
    DV -> RF : Validation errors
    RF -> C : Show error messages
end

deactivate DV
deactivate RF

note right of UM
  The unique_key is generated
  for password reset functionality
  and displayed once to user
end note

@enduml
