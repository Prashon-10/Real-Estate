{% extends 'base.html' %}

{% block title %}Edit Your Profile - RealEstate{% endblock %}

{% block content %}

<div class="row justify-content-center">

    <div class="col-md-8">

        <div class="card shadow">

            <div class="card-header bg-white text-center py-3">

                <h3 class="mb-0">Edit Your Profile</h3>

            </div>

            <div class="card-body p-4">

                <form method="post" enctype="multipart/form-data">

                    {% csrf_token %}



                    {% if form.non_field_errors %}

                    <div class="alert alert-danger">

                        {% for error in form.non_field_errors %}

                        {{ error }}

                        {% endfor %}

                    </div>

                    {% endif %}



                    <div class="row">

                        <div class="col-md-6 mb-3">

                            <label for="{{ form.first_name.id_for_label }}" class="form-label">First Name</label>

                            {{ form.first_name.as_widget|safe }}

                            {% if form.first_name.errors %}

                            <div class="text-danger small">

                                {% for error in form.first_name.errors %}

                                {{ error }}

                                {% endfor %}

                            </div>

                            {% endif %}

                        </div>



                        <div class="col-md-6 mb-3">

                            <label for="{{ form.last_name.id_for_label }}" class="form-label">Last Name</label>

                            {{ form.last_name.as_widget|safe }}

                            {% if form.last_name.errors %}

                            <div class="text-danger small">

                                {% for error in form.last_name.errors %}

                                {{ error }}

                                {% endfor %}

                            </div>

                            {% endif %}

                        </div>

                    </div>



                    <div class="mb-3">

                        <label for="{{ form.email.id_for_label }}" class="form-label">Email</label>

                        {{ form.email.as_widget|safe }}

                        {% if form.email.errors %}

                        <div class="text-danger small">

                            {% for error in form.email.errors %}

                            {{ error }}

                            {% endfor %}

                        </div>

                        {% endif %}

                    </div>



                    {% if user.is_agent %}

                    <div class="mb-3">

                        <label for="{{ form.phone_number.id_for_label }}" class="form-label">Phone Number</label>

                        {{ form.phone_number.as_widget|safe }}

                        {% if form.phone_number.errors %}

                        <div class="text-danger small">

                            {% for error in form.phone_number.errors %}

                            {{ error }}

                            {% endfor %}

                        </div>

                        {% endif %}

                    </div>



                    <div class="mb-3">

                        <label for="{{ form.bio.id_for_label }}" class="form-label">Bio</label>

                        {{ form.bio.as_widget|safe }}

                        {% if form.bio.errors %}

                        <div class="text-danger small">

                            {% for error in form.bio.errors %}

                            {% endfor %}

                        </div>

                        {% endif %}

                    </div>

                    {% endif %}



                    <div class="mb-3">

                        <label for="{{ form.profile_image.id_for_label }}" class="form-label">Profile Image</label>

                        {{ form.profile_image.as_widget|safe }}

                        {% if form.profile_image.errors %}

                        <div class="text-danger small">

                            {% for error in form.profile_image.errors %}

                            {{ error }}

                            {% endfor %}

                        </div>

                        {% endif %}



                        {% if user.profile_image %}

                        <div class="mt-2">

                            <p>Current Image:</p>

                            <img src="{{ user.profile_image.url }}" alt="{{ user.username }}"
                                style="max-width: 100px; max-height: 100px;" class="rounded">

                        </div>

                        {% endif %}

                    </div>



                    <div class="d-grid mb-4">

                        <button type="submit" class="btn btn-primary">Save Changes</button>

                    </div>



                    <div class="text-center">

                        <p class="mb-0">

                            <a href="{% url 'accounts:profile' %}" class="text-decoration-none">Cancel and return to
                                profile</a>

                        </p>

                    </div>

                </form>

            </div>

        </div>

    </div>

</div>

{% endblock %}